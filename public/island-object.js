// object.js
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.124/build/three.module.js';
import { GLTFLoader } from 'https://cdn.jsdelivr.net/npm/three@0.124/examples/jsm/loaders/GLTFLoader.js';

export const object = (() => {
  class NatureObject {
    constructor(scene) {
      this.scene_ = scene;
      this.models_ = [];
      this.collidables_ = [];
      this.waterMesh_ = null;
    }

    async init() {
      await this.LoadModels_();
    }

    LoadModels_() {
      const gltfLoader = new GLTFLoader();
      const modelsToLoad = [
        {
          type: 'gltf',
          filename: 'square_water.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(0, 2.5, 0), // 바닥보다 약간 아래로
          scale: new THREE.Vector3(100, 1, 100),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: false, // 바닥이므로 충돌하지 않음
          castShadow: false,
          receiveShadow: false,
          isWater: true,
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(0, 3, 0),
          scale: new THREE.Vector3(1, 1, 2), 
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 4 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(2, 3, 0),
          scale: new THREE.Vector3(1, 1, 4), 
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 8 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(4, 3, -1),
          scale: new THREE.Vector3(1, 1, 7),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 14 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(6, 3, 1),
          scale: new THREE.Vector3(1, 1, 9), 
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 18 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(6, 3, -13),
          scale: 1,
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 2 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(8, 3, -10),
          scale: new THREE.Vector3(1, 1, 6),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
	        boundingBoxSize: { width: 2, height: 1, depth: 12 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(8, 2.7, 0),
          scale: new THREE.Vector3(1, 1.5, 4),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
	        boundingBoxSize: { width: 2, height: 1.5, depth: 8 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(8, 3, 7),
          scale: new THREE.Vector3(1, 1, 3),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 6 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(10, 3, -12),
          scale: new THREE.Vector3(1, 1, 6),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
          boundingBoxSize: { width: 2, height: 1, depth: 12 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(10, 2.7, -1),
          scale: new THREE.Vector3(1, 1.5, 5),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 10 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(10, 3, 7),
          scale: new THREE.Vector3(1, 1, 3),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 6 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(12, 3, -5),
          scale: new THREE.Vector3(1, 1, 15),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 30 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(12, 2.7, 7),
          scale: new THREE.Vector3(1, 1.5, 1),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 2 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(12, 2.7, -3),
          scale: new THREE.Vector3(1, 1.5, 7),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 14 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(14, 2.7, -2),
          scale: new THREE.Vector3(1, 1.5, 12),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 24 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(14, 3, -19),
          scale: new THREE.Vector3(1, 1, 5),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 10 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(14, 2.7, -2),
          scale: new THREE.Vector3(1, 1.5, 12),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 24 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(14, 3, -10),
          scale: new THREE.Vector3(1, 1, 6),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 12 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(16, 3, -9),
          scale: new THREE.Vector3(1, 1, 19),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 38 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(16, 2.7, -1),
          scale: new THREE.Vector3(1, 1.5, 15),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 30 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(18, 3, -10),
          scale: new THREE.Vector3(1, 1, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 48 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(18, 2.7, -2),
          scale: new THREE.Vector3(1, 1.5, 18),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 36 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(18, 2.7, 19),
          scale: new THREE.Vector3(1, 1.5, 1),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 2 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 2.7, 0),
          scale: new THREE.Vector3(1, 1.5, 22),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 44 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 3, -23),
          scale: new THREE.Vector3(1, 1, 1),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 2 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 2.7, -25),
          scale: new THREE.Vector3(1, 1.5, 1),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 2 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 3, -27),
          scale: new THREE.Vector3(1, 1, 1),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 2 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 2.7, -29),
          scale: new THREE.Vector3(1, 1.5, 1),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 2 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 3, -34),
          scale: new THREE.Vector3(1, 1, 4),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 8 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(22, 2.7, -5),
          scale: new THREE.Vector3(1, 1.5, 29),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 38 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(22, 3, -40),
          scale: new THREE.Vector3(1, 1, 6),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 12 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(24, 3, -38),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(26, 3, -38),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(28, 3, -38),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(30, 3, -40),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(32, 3, -40),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(34, 3, -42),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(38, 3, -40),
          scale: new THREE.Vector3(3, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(43, 3, -38),
          scale: new THREE.Vector3(2, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(46, 3, -40),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(48, 3, -42),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(50, 3, -40),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(52, 3, -38),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(54, 3, -34),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(56, 3, -30),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_sand.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(58, 3, -24),
          scale: new THREE.Vector3(1, 1, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1, depth: 20 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(24, 2.7, -6),
          scale: new THREE.Vector3(1, 1.5, 30),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 60 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(26, 2.7, -8),
          scale: new THREE.Vector3(1, 1.5, 34),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 68 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(28, 2.7, -7),
          scale: new THREE.Vector3(1, 1.5, 33),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 66 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(30, 2.7, -8),
          scale: new THREE.Vector3(1, 1.5, 34),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 68 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(32, 2.7, -4),
          scale: new THREE.Vector3(1, 1.5, 32),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 64 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(34, 2.7, -4),
          scale: new THREE.Vector3(1, 1.5, 32),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 64 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(36, 2.7, -7),
          scale: new THREE.Vector3(1, 1.5, 33),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 66 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(38, 2.7, -3),
          scale: new THREE.Vector3(1, 1.5, 29),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 58 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(40, 2.7, -2),
          scale: new THREE.Vector3(1, 1.5, 28),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 56 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(42, 2.7, -2),
          scale: new THREE.Vector3(1, 1.5, 28),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 56 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(44, 2.7, -2),
          scale: new THREE.Vector3(1, 1.5, 28),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 56 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(46, 2.7, -6),
          scale: new THREE.Vector3(1, 1.5, 29),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 58 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(48, 2.7, -8),
          scale: new THREE.Vector3(1, 1.5, 29),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 58 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(50, 2.7, -8),
          scale: new THREE.Vector3(1, 1.5, 25),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 50 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(52, 2.7, -8),
          scale: new THREE.Vector3(1, 1.5, 20),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 40 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(54, 2.7, -10),
          scale: new THREE.Vector3(1, 1.5, 14),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 28 },
        },
        {
          filename: 'square_forest_detail.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(56, 2.7, -12),
          scale: new THREE.Vector3(1, 1.5, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 20 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(16, 3.2, -2),
          scale: new THREE.Vector3(1, 1.5, 10),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 20 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(18, 3.2, -2),
          scale: new THREE.Vector3(1, 1.5, 12),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 24 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(20, 3.2, -2),
          scale: new THREE.Vector3(1, 1.5, 16),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 32 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(22, 3.2, 0),
          scale: new THREE.Vector3(1, 1.5, 18),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 36 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(24, 3.2, -4),
          scale: new THREE.Vector3(1, 1.5, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 48 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(26, 3.2, -4),
          scale: new THREE.Vector3(1, 1.5, 22),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 44 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(28, 3.2, 0),
          scale: new THREE.Vector3(1, 1.5, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 48 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(30, 3.2, 0),
          scale: new THREE.Vector3(1, 1.5, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 48 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(32, 3.2, -2),
          scale: new THREE.Vector3(1, 1.5, 28),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 56 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(34, 3.2, -2),
          scale: new THREE.Vector3(1, 1.5, 26),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 52 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(36, 3.2, 0),
          scale: new THREE.Vector3(1, 1.5, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 48 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(38, 3.2, 2),
          scale: new THREE.Vector3(1, 1.5, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 48 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(40, 3.2, 2),
          scale: new THREE.Vector3(1, 1.5, 24),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 48 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(42, 3.2, 0),
          scale: new THREE.Vector3(1, 1.5, 26),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 52 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(44, 3.2, 0),
          scale: new THREE.Vector3(1, 1.5, 22),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 44 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(46, 3.2, -4),
          scale: new THREE.Vector3(1, 1.5, 20),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 40 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(48, 3.2, -4),
          scale: new THREE.Vector3(1, 1.5, 16),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 32 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(50, 3.2, -4),
          scale: new THREE.Vector3(1, 1.5, 12),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 24 },
        },
        {
          filename: 'square_rock.gltf.glb',
          path: './resources/kaykit_medieval_builder_pack_1.0/Models/tiles/square/gltf/',
          position: new THREE.Vector3(52, 3.2, -8),
          scale: new THREE.Vector3(1, 1.5, 6),
          rotation: new THREE.Euler(0, 0, 0),
          collidable: true,
          castShadow: false,
          receiveShadow: true,
boundingBoxSize: { width: 2, height: 1.5, depth: 12 },
        },
        {
          filename: 'rocks-a.glb',
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          position: new THREE.Vector3(46, 1.8, -6),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 3, height: 4.7, depth: 3 }, offset: new THREE.Vector3(0, 0, 0.5) },
            { size: { width: 3, height: 5.7, depth: 3 }, offset: new THREE.Vector3(-1.5, 0, -1.7) },
          ],
        },
        {
          filename: 'rocks-b.glb',
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          position: new THREE.Vector3(48, 4.7, 2),
          scale: 2.5,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 4, height: 8.5, depth: 4 }, offset: new THREE.Vector3(0, 0, -0.2) },
            { size: { width: 3, height: 5.7, depth: 3 }, offset: new THREE.Vector3(-0.8, 0, -3) },
            { size: { width: 3, height: 3.5, depth: 3 }, offset: new THREE.Vector3(-3.4, 0, -1.1) },
            { size: { width: 3, height: 2.3, depth: 3 }, offset: new THREE.Vector3(2.5, 0, -2.5) },
            { size: { width: 3, height: 4, depth: 3 }, offset: new THREE.Vector3(2.5, 0, 1.5) },
            { size: { width: 3, height: 2.5, depth: 3 }, offset: new THREE.Vector3(0, 0, 2.5) },
          ],
        },
        {
          filename: 'rocks-b.glb',
          position: new THREE.Vector3(46, 4.7, 9),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 3.6, height: 6.8, depth: 3.6 }, offset: new THREE.Vector3(0, 0, 0) },
            { size: { width: 3.6, height: 3, depth: 3.6 }, offset: new THREE.Vector3(-1, 0, 2) },
            { size: { width: 3.6, height: 2, depth: 3.6 }, offset: new THREE.Vector3(1, 0, 2) },
            { size: { width: 3.2, height: 4.5, depth: 3.2 }, offset: new THREE.Vector3(2.5, 0, -0.4) },
            { size: { width: 3.2, height: 3.2, depth: 3.2 }, offset: new THREE.Vector3(0, 0, -2) },
          ],
        },
        {
          filename: 'rocks-a.glb',
          position: new THREE.Vector3(40, 4.7, 14),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 3.5, height: 4.5, depth: 3.5 }, offset: new THREE.Vector3(-0.5, 0, 0) },
            { size: { width: 3.5, height: 2.7, depth: 3.5 }, offset: new THREE.Vector3(-2.5, 0, 0.2) },
            { size: { width: 3.5, height: 2.2, depth: 3.5 }, offset: new THREE.Vector3(0.5, 0, 1.3) },
            { size: { width: 3.5, height: 2.1, depth: 3.5 }, offset: new THREE.Vector3(0.5, 0, -1.6) },
            { size: { width: 3.5, height: 6, depth: 3.5 }, offset: new THREE.Vector3(1.4, 0, -1.2) },
            { size: { width: 3.5, height: 2.5, depth: 3.5 }, offset: new THREE.Vector3(3, 0, -1.2) },
          ],
        },
        {
          filename: 'rocks-c.glb',
          position: new THREE.Vector3(34, 4.7, 15),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 2.5, height: 4.7, depth: 2.5 }, offset: new THREE.Vector3(-0.4, 0, -0.2) },
            { size: { width: 2.8, height: 3.2, depth: 2.8 }, offset: new THREE.Vector3(-1.5, 0, 1.5) },
            { size: { width: 2.4, height: 2.5, depth: 2.4 }, offset: new THREE.Vector3(-1.5, 0, -0.2) },
            { size: { width: 2.4, height: 2.3, depth: 2.4 }, offset: new THREE.Vector3(0.5, 0, -1.5) },
            { size: { width: 2.4, height: 3.4, depth: 2.4 }, offset: new THREE.Vector3(0.8, 0, 1) },
          ],
        },
        {
          filename: 'ship-wreck.glb',
          position: new THREE.Vector3(40, 2.5, 0),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 9, height: 7, depth: 15 }, offset: new THREE.Vector3(0, -2.8, 0) },
            { size: { width: 9, height: 1.6, depth: 5 }, offset: new THREE.Vector3(0, 5.5, 7) },
          ],
        },
        {
          filename: 'ship-wreck.glb',
          position: new THREE.Vector3(40, 10, 0),
          scale: 0.1,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxes: [
            { size: { width: 9.2, height: 0.7, depth: 2 }, offset: new THREE.Vector3(0, -3, 5) },
          ],
        },
        {
          filename: 'chest.glb',
          position: new THREE.Vector3(34, 4.7, 10),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 2.2, height: 2, depth: 2.5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'palm-straight.glb',
          position: new THREE.Vector3(20, 4, 4),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 1, height: 7, depth: 1 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'palm-straight.glb',
          position: new THREE.Vector3(52, 4, -18),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 1, height: 7, depth: 1 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'patch-grass-foliage.glb',
          position: new THREE.Vector3(20, 4.3, 4),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
        },
        {
          filename: 'palm-straight.glb',
          position: new THREE.Vector3(28, 4, -36),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 1, height: 7, depth: 1 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'palm-straight.glb',
          position: new THREE.Vector3(40, 4, -26),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 1, height: 7, depth: 1 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'platform-planks.glb',
          position: new THREE.Vector3(36, 4.7, -14),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 4, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 3.5, height: 0.5, depth: 5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'platform-planks.glb',
          position: new THREE.Vector3(40, 4.7, -16),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 4, height: 0.5, depth: 5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'structure-fence.glb',
          position: new THREE.Vector3(30, 2, -10),
          scale: 2.5,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          boundingBoxOffset: new THREE.Vector3(0, 0.4, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 6.2, height: 5, depth: 6.2 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'structure-fence.glb',
          position: new THREE.Vector3(30, 5.5, -10),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          boundingBoxOffset: new THREE.Vector3(0, 0, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 5, height: 4.4, depth: 5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'crate-bottles.glb',
          position: new THREE.Vector3(31, 10, -11),
          scale: 1.2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          boundingBoxOffset: new THREE.Vector3(0, -4.2, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 1.5, height: 5, depth: 1.5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'platform-planks.glb',
          position: new THREE.Vector3(20, 4.7, -12),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / -4, 0),
          boundingBoxOffset: new THREE.Vector3(0, 0, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 3.5, height: 0.5, depth: 5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
        {
          filename: 'platform-planks.glb',
          position: new THREE.Vector3(24, 4.7, -8),
          scale: 2,
          rotation: new THREE.Euler(0, Math.PI / 1, 0),
          boundingBoxOffset: new THREE.Vector3(0.8, 0, 0),
          path: './resources/kenney_pirate-kit/Models/GLB format/',
          collidable: true,
          castShadow: true,
          receiveShadow: true,
          boundingBoxSize: { width: 5, height: 0.5, depth: 5 }, // 임의의 값, 실제 모델에 맞게 조정 필요
        },
      ];

      const loadedModels = {};

      const promises = modelsToLoad.map((modelInfo) => {
        return new Promise((resolve) => {
          const loader = new GLTFLoader();
          loader.setPath(modelInfo.path);
          loader.load(modelInfo.filename, (gltf) => {
            this.OnModelLoaded_(gltf.scene, modelInfo);
            resolve();
          });
        });
      });
      return Promise.all(promises);
    }

    OnModelLoaded_(model, modelInfo) {
      model.userData.filename = modelInfo.filename;
      if (modelInfo.scale instanceof THREE.Vector3) {
        model.scale.copy(modelInfo.scale);
      } else {
        model.scale.setScalar(modelInfo.scale);
      }
      model.position.copy(modelInfo.position);
      if (modelInfo.rotation) {
        model.rotation.copy(modelInfo.rotation);
      }

      model.traverse((c) => {
        if (c.isMesh) {
          c.castShadow = modelInfo.castShadow !== undefined ? modelInfo.castShadow : true;
          c.receiveShadow = modelInfo.receiveShadow !== undefined ? modelInfo.receiveShadow : true;
          if (modelInfo.isWater) {
            this.waterMesh_ = c;
            this.waterMesh_.geometry = new THREE.BufferGeometry().fromGeometry(new THREE.Geometry().fromBufferGeometry(c.geometry));
            this.waterMesh_.originalPositions = new Float32Array(this.waterMesh_.geometry.attributes.position.array);
          }
        }
      });

      this.scene_.add(model);
      this.models_.push(model);

      if (modelInfo.collidable) {
        if (modelInfo.boundingBoxes) {
          modelInfo.boundingBoxes.forEach(bboxInfo => {
            const { width, height, depth } = bboxInfo.size;
            const offset = bboxInfo.offset || new THREE.Vector3();
            const halfWidth = width / 2;
            const halfHeight = height;
            const halfDepth = depth / 2;
            const boundingBox = new THREE.Box3(
              new THREE.Vector3(-halfWidth, 0, -halfDepth).add(modelInfo.position).add(offset),
              new THREE.Vector3(halfWidth, halfHeight, halfDepth).add(modelInfo.position).add(offset)
            );
            const collidable = { model, boundingBox };
            this.collidables_.push(collidable);

            // 바운딩 박스 헬퍼를 항상 보이도록 추가
            const boundingBoxHelper = new THREE.Box3Helper(boundingBox, 0x00ff00);
            this.scene_.add(boundingBoxHelper);
            collidable.boundingBoxHelper = boundingBoxHelper;
          });
        } else if (modelInfo.boundingBoxSize) { // 기존 단일 바운딩 박스 처리 로직 유지
          const { width, height, depth } = modelInfo.boundingBoxSize;
          const halfWidth = width / 2;
          const halfHeight = height;
          const halfDepth = depth / 2;
          const boundingBox = new THREE.Box3(
            new THREE.Vector3(-halfWidth, 0, -halfDepth).add(modelInfo.position).add(modelInfo.boundingBoxOffset || new THREE.Vector3()),
            new THREE.Vector3(halfWidth, halfHeight, halfDepth).add(modelInfo.position).add(modelInfo.boundingBoxOffset || new THREE.Vector3())
          );
          const collidable = { model, boundingBox };
          this.collidables_.push(collidable);

          // 바운딩 박스 헬퍼를 항상 보이도록 추가
          const boundingBoxHelper = new THREE.Box3Helper(boundingBox, 0x00ff00);
          this.scene_.add(boundingBoxHelper);
          collidable.boundingBoxHelper = boundingBoxHelper;
        }
      }
    }

    Update(timeElapsed) {
      if (this.waterMesh_) {
        const positions = this.waterMesh_.geometry.attributes.position.array;
        const originalPositions = this.waterMesh_.originalPositions;
        const time = performance.now() * 0.001;

        for (let i = 0; i < positions.length; i += 3) {
          const x = originalPositions[i];
          const z = originalPositions[i + 2];
          positions[i + 1] = originalPositions[i + 1] + Math.sin(x * 0.5 + time * 2) * 0.1 + Math.cos(z * 0.5 + time * 2) * 0.1;
        }
        this.waterMesh_.geometry.attributes.position.needsUpdate = true;
      }
    }

    GetCollidables() {
      return this.collidables_;
    }
  }

  return {
    NPC: NatureObject,
  };
})();
